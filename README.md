# Невеличкий хендбук для студентів "БУЙ Studies" по Firebase або перший крок в прірву хмарних сервісів

## Акт перший - Створення власного проекту

1. Для початку роботи з Firebase нам потрібно створити власний проект на цьому сервісі. То ж без вагань тицяємо на кнопку "Get started": 

![step 1](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/022fd9bf-b160-49ef-ae58-adc085dbe57a)

2. Так-так, ще одна сторінка і ще одна кнопка. Але на цей раз ми вже дійсно будемо створювати проект. Робимо "жмак" на кнопку "Create a project":

![step 2](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/81bd0a25-b2d6-494f-93ea-62d1d12faebb)

3. На наступній сторінці ми даємо назву нашому проекту і переписуємо все своє майно на Google після чого клікаємо на "Continue":

![step 3](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/8075a6a9-2d59-472a-b60b-2ecbcf3ed565)

4. Після цього ми потрапляємо на сторінку, де на даному етапі навчання можна спокійно перевести "тогл" "Enable Google Analytics for this project" в положення "нє%@й шастать" і нарешті натиснути на кнопку "Create project":

![step 4](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/14468715-2e4b-49d6-8998-63fabde46577)

5. Тут ми можемо 30 секунд подумати над бентежністю життя:

![step 5](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/0177c845-c1e3-489e-a0ec-344b8f7cbb4e)

6. О, воно завантажилося, живемо! (не все так просто). Натискаємо на "Continue":

![step 6](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/b4053af5-7dc5-4cae-a70f-696cee770b7a)

7. Знову потрапляємо на вже знайому сторінку, але щось тут змінилося. І справді, тепер нам треба створити додаток (на логічне питання "а якого власне %*@ проджекта недостатньо?!" ніхто вам відповіді не дасть. Звикайте, це Google). Нас з вами цікавить веб додаток, то ж клікаємо по канонічній іконці ~~і радуємося життю~~:

![step 7](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/c1953ba7-fc09-4d86-af39-78d30c2fec63)

8. Даємо назву тепер вже нашому додатку, ігноруємо "чекбокс" з якимсь "хостінгом" і робимо "тиць" по кнопці "Register app":

![step 8](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/c5f99424-c658-43a0-a6c5-b793a5069396)

9. Наступна сторінка пропонує нам "підключити" Firebase до нашого додатка. ~~Є два стули~~ Нам пропонують два варіанти: встановити npm пакет, або використати <script> тег, що ми з вами і зробимо. Але перед тим як натиснути "Continue to console" ***`ОБОВ'ЯЗКОВО`*** збережіть собі firebaseConfig (обведено червоним) і ***`НІ В ЯКОМУ РАЗІ`*** не діліться цими даними. Це особисто ваші дані за допомогою яких ви будете отримувати доступ до firebase з вашого застосунку. Весь інший код можна ігнорувати, тому що "я і моя молодая команда" знайшли спосіб не засирати index.html усіляким непотребом, але про це згодом:

![step 9](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/1a69cb00-e5e6-4882-8033-59dbcc962ced)

10. Вітаю! Ми нарешті завершили всі основні приготування:

![step 10](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/6e1403fc-bd2d-4a8a-a15e-067742869f39)

***`Кінець першого акту. Завіса опускаєтья`***

## Акт другий - Firestore

### Дія перша - Колекції. Документи. Поля.

1. Ми з вами почнемо знайомство з функціоналом Firebase з хмарного сховища або ж Cloud Firestore. Клікаємо по відповідному розділу, щоб додати цей продукт до нашого додатку:

![step 1](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/16641f9b-4831-4c27-bcce-7d55c004f794)

2. Власне тут ми маємо можливість створити нашу базу даних ~~з блекджеком і куртизанками~~. Натискаємо "Create database" і тут вже реально радіємо життю (ну майже):

![step 2](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/404363d6-4673-4780-97aa-288861704f45)

3. Нам з вами залишається вибрати в якому режимі ми будемо використовувати базу даних. Поки що ми використаємо "тестовий режим" в якому в нас не буде обмеженнь по доступу, бо інакше нас чекає цікава (ні) ситуація з так званими "правилами", але про все це згодом, ми ж з вами це вперше щупаєм:

![step 3](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/5ab39d01-92fd-49ee-b655-372dc72a79bc)

4. І останнім кроком на даному етапі буде вибір геолокації серверів (~~шо то %:?ня, шо ето %:?ня і еті обє %:?ні такіє...~~). Взагалі відштовхуватись варто від того де буде більша кількість юзерів в подальшому в вашому додатку, але то таке:

![step 4(0)](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/0299742b-4e8f-413e-9a93-79b265fd143f)

5. Вуаля! Наша база даних створена. Конкретно цей тип бази даних тримається на ~~чесному слові~~ колекціях та документах (або ж колекціях документів, так зрозуміліше). Так що давайте створимо нашу першу "колекцію", щоб зрозуміти що воно таке: 

![step 5](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/f7ac5971-bf9d-437f-ae92-33ea3f99e0dc)

6. Так, знову щось треба обізвати. Для того щоб не ускладнювати собі життя бажано називати нашу колекцію одним змістовним словом. Власне ми так і вчинимо, після чого жмакаємо на кнопку "Next": 

![step 6](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/3687cd4d-19fd-4b5e-a309-1b7771772c53)

7. Те що ми вирішили не ускладнювати собі життя не означає, що нам його не ускладнять інші. На щастя все що від нас треба це просто натиснути на "Auto-ID" (і відкинуться в кріслі): 

![step 7(0)](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/180bb9c9-f433-464e-bf80-1e08862c4ac8)

Не лякайтеся, все так і треба. Тепер можна просто клікнути по кнопці "Save": 

![step 7(1)](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/e3dc9121-ee2b-4cd3-a7ef-d85a7a08ec49)

8. Вітаю! Ми створили нашу першу колекцію. Їх звісно може бути і декілька, але ми поки що обмежимося однією. В кожну колекцію можна додати будь яку (ну майже) кількість "документів" (обведено червоним) всередині яких ми можемо створити або ще одну "колекцію" ~~така собі кроліча нора~~ (обведено фіолетовим), або нарешті просто наповнити документ реальними даними (обведено жовтим), з якими в майбутньому ми зможемо віддалено робити певні дії певного характеру. Власне ми з вами почнемо із додавання реальних даних (бо там теж є на що подивиться). Отже тицяємо на "Add field" ~~і уважно стежимо за руками~~:

![step 8](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/feb450bf-230f-4e18-90a9-97f0fb57ab3d)

9. Наші з вами дані зберігаються у вигляді ключ/значення із строгим типізуванням для "самих малєнькіх". І якщо в когось закралися думки по типу "Щось це дуже схоже на об'єкт", то не дарма, бо фактично "документ" і є обєктом. Відповідно таких "полів" ми можемо створювати ~~до всирачки~~ майже скількі завгодно:

![step 9(0)](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/1872e3c8-583c-4f2d-af7f-5d9e5f5113a9)

10. Але не одними полями єдині! Окрім "рядка" в нас з вами є широкий асортимент типів даних. Наприклад в "reference" можна запхати посилання на якийсь інший документ в іншій колекції в нашії базі даних. Але зараз не про це. Нам ще на "Add" треба клікнути:

![step 9(1)](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/33acd49c-440d-43f6-a020-4f7df194978b)

11. Всьо! Ми з вами трохи "наповнили" руцями нашу базу даних:

![step 10](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/a1000726-9474-4ddb-8e9b-85ada2c0eff3)

***`Кінець першої дії другого акту`***

### Дія друга - Жуки на костилях.

1. Тепер, налаштувавши все що тільки можна на даному етапі навчання, ми можемо перейти до використання нашої баз даних. Для того щоб просто помацати зараз "що воно таке той ваш Firestore" та подивитись як воно працює нам з вами буде достатньо створити три файліка: `firebase.js` - тут ми будемо зберігати наші дані для доступу безпосередньо до нашого додатку на стороні Firebase, `index.js` - де буде відбуватися вся магія та `index.html` - ну бо просто треба. На логічне питання "А чи можна все це робити в одному джс файлі?" я скажу вам "так", але це іде в розріз з "мухо-котлєточним" підходом (про це буде окрема стаття):    

![step 1](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/9b4855ae-0577-481f-aa73-7d9d652d3b05)

2. В файлі `index.html` підключаємо як "модуль" за допомогою тега `<script>` наш `index.js`. Це потрібно,по-перше, для того щоб все в принципі працювало, а по-друге, щоб власне працювали "import"и:

![step 2](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/34e1d3c1-ccf8-43be-bdb8-031658705771)

3. Для початку нам з вами треба імпортувати декілька функції з Firebase для того щоб в подальшому ініціалізувати власне сам Firebase в коді. Ми почнемо з імпорту функції "initializeApp" в файлі `firebase.js`: 

![step 3](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/2547b34f-108e-4187-a75e-e0c2eee86fc3)

4. "І шо, і всьо?". Аби ж все було так просто. Нам же з вами треба ще якось працювати з нашою базою. Тому в той самий файл треба імпортувати ще одну функцію - "getFirestore" - для роботи безпосередньо з базою даних:  

![step 4](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/ee35ba5d-cc60-4618-bacc-8e4eae626e85)

5. Пам'ятаєте я просив вас зберегти та нікому не показувати дані для доступу до нашого додатку у Firebase (див. Акт перший, пункт 9)? Вони нарешті нам знадобляться. Робимо їм "Ctrl/Cmd + V" після наших з вами "import"ів:

![step 5](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/08b813e9-8479-4ae1-bdf6-bbabdf170a96)

6. Але це не все. Ми ж для чогось імпортували там ~~якусь %@*ню~~ якісь функції. Оголошуємо змінну "app" (назва змінної може бути і іншою, але ми зараз наслідуємо приклад з офіційної документації), в яку ми і запишемо нашу імпортовану функцію "initializeApp", єдиним аргументом якої будуть як раз наші з вами "дуууууууже секретні дані", або ж простими словами конфіг: 
 
![step 6](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/51a95442-c4f5-41b0-aa73-2ac0e49b2032)

7. Додаток ініціалізували, тепер можна і ~~покурить~~ "завести" нашу базу даних. Для цього створюємо змінну "db" (знову ж таки, назва змінної може бути на ваш смак, тому що ми наслідуєм приклад з офіційної документації), в яку ми запишемо вже функцію "getFirestore", аргументом якої буде вже буде наш "app" з попереднього кроку (я знаю, мозок вже не вивозить, але воно саме так працює і я нічого не можу з цим зробити, так вони це створили). Важливий момент - саме змінну "db" нам треба експортувати з цього файлу, тому що ми її будемо використовувати вже в `index.js`:  

![step 7](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/689b4b6c-49b7-4d48-9b6f-273c1da5c214)

8. Вітаю! З `firebase.js` покінчено і ~~можна це забути як страшний сон~~ ми можемо переходити безпосередньо до магії, а саме в файл `index.js`. Вже в файл `index.js` нам з вами треба імпортувати ще дві функції для роботи з Firestore: "getDocs" та "collection" і звісно ж нашу з вами змінну "db", яку ми експортували в попередньому пнукті: 

![step 8](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/eb14ed4d-2f12-4d0e-b91d-cfa86fda1a76)

9. І вже тепер "релааааааакс", з імпортами покінчено і можна вже щось робити з нашою базою даних. Офіційна документація дуже сильно рекомендує використовувати асинхронні запити для роботи з базою даних. Хто ми такі щоб з ними сперечатися? Для цього ми оголошуємо асинхронну функцію, нехай вона буде називатися "getStudents": 

![step 9](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/1f9c4fb4-8b73-4b42-846c-27776877640b)

10. Всередині функції нам бажано створити змінну в яку ми запхаємо наші з вами імпортовані функції для роботи з Firestore, які повернуть нам в цю змінну так звані "documentSnapshot"и. На виході це щось дуже схоже на масив "промісів", але у власному форматі. Фактично це буде масив всіх наших "документів" які лежать всередині нашої "колекції", але в необробленому вигляді. Оголошуємо змінну "querySnapshot" в якій буде функція "getDocs" (не забудьте про "await" перед нею), аргументом якої буде функція "collection", аргументами якої вже будуть наша з вами змінна "db" та назва "колекції" (див. Акт другий, дія перша, пункт 6) дані з якої ми хочемо отримати (я знаю, що це ~~п%:?єц~~ складно для розуміння, але після декількох спроб і годин роботи з цим ~~у вас відкриється третє око~~ ви вже самі зможете розповідати іншим що там і як працює):  

![step 10](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/50b982c6-912e-4856-8edc-c8f741262f9f)

11. "Ну отримали ми цей масив документ снепшотів, а далі шо?". А далі як і з промісами нам з вами треба привести отримані дані до читабельного вигляду. Тому що окрім наших з вами даних кожний "documentSnapshot" як одиниця даних містисть в собі ще багато чого включно з методом який ми з вами будемо використовати, щоб витягнути наші з вами дані з нього ж. Називається він "data()". Тому згадуємо що "querySnapshot" це по суті масив і "пробігаємося" по ньому за допомогою методу "forEach", застосовуючи до кожного "документа" метод "data()". В цілому, на даному етапі після того як ви "витягенете" дані за допомогою методу "data()" ви з ними можете робити що завгодно: записать це все діло просто в масив, передати кудись тощо. Але для наглядності ми з вами зараз просто виведемо це все діло в консоль браузера, щоб подивитись "а що ж там" ми отримуємо на виході. З.І. Не забудьте тільки викликати нашу з вами функцію "getStudents", бо нічого ж не запрацює: 

![step 11](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/7de7aeef-4b6d-4acb-8be0-6c189cf6dd3d)

12. Я вас категорично вітаю! Якащо запустити це все діло і відкрити в браузері, а потім ще і в консоль зазирнути, то ми побачимо, що дані з нашої бази даних вони вже тут ~~з нами в одній кімнаті~~ як тут виведені в консоль як ми і хотіли та ще й у вигляді об'єкту(!!!): 

![step 12](https://github.com/ohiienko-r/firebase-bububui/assets/109099364/e867c2a0-e35d-49d5-8f32-43f3dc398d46)

***`Кінець. Завіса опускаєтья`***

### Післяслово

Ми з вами пройшли непростий шлях від створення власного проекту та бази даних на Firebase до отримання данних з цієї самої бази вже у себе в коді. Цей хендбук демонструє та описує лише краплю функціоналу з моря можливостей Firebase. В майбутньому ми з вами розглянемо більш детально і Firestore з його функціоналом, і Authentication, і ще багато-багато всього, але поки що ми знаходимось на початку нашого з вами шляху. То ж навчайтеся, кайфуйте від того шо робите та допомагайте іншим. Будьте мені здорові! Дякую за увагу.
